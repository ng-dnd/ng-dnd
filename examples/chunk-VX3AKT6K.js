import{e as $,f as R}from"./chunk-RPUZJCG6.js";import"./chunk-AZZEJM65.js";import{a as N}from"./chunk-T55MMTBF.js";import{Eb as r,Fb as b,Gb as P,Ib as B,Nb as w,Pa as a,Rb as u,Sb as y,Ya as c,ab as l,gb as s,ib as x,ja as f,jb as I,lc as S,mb as v,mc as V,qb as i,rb as o,sa as F,sb as m,sc as A,ta as C,tc as L,ua as _,ub as T,vb as D,wb as d,xc as E,zc as M}from"./chunk-C7W2QAC5.js";function z(n,h){if(n&1){let e=T();i(0,"div",1)(1,"p")(2,"b"),r(3),o()(),i(4,"p")(5,"button",2),D("click",function(){C(e);let p=d();return _(p.empty())}),r(6),o()(),i(7,"pre"),r(8),u(9,"json"),o()()}if(n&2){let e=h,t=d();I(t.getStyles(e)),s("dropTarget",t.trashTarget),a(3),B(" ",e.canDrop?"drop "+e.itemType+" in the":""," ",e.isOver&&!t.hasCapacity?"cannot drop, ":""," ",t.name," ",t.hasCapacity?"":" is full!"," "),a(3),P("empty ",t.name,""),a(2),b(y(9,9,t.trashes))}}var j=(()=>{class n{constructor(){this.dnd=f(M),this.name="",this.accepts=["TRASH"],this.trashes=[],this.capacity=6,this.trashTarget=this.dnd.dropTarget(null,{canDrop:e=>this.hasCapacity,drop:e=>{let t=e.getItemType();this.trashes.unshift(t)}}),this.collected$=this.trashTarget.listen(e=>({isOver:e.isOver(),canDrop:e.canDrop(),itemType:e.getItemType()}))}get hasCapacity(){return this.trashes.length<this.capacity}getStyles({isOver:e,canDrop:t}){return{backgroundColor:e&&t?"#cfcffc":t?"#fffacf":"white"}}empty(){this.trashes=[]}ngOnInit(){this.trashTarget.setTypes(this.accepts)}ngOnDestroy(){this.trashTarget.unsubscribe()}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275cmp=c({type:n,selectors:[["app-bin"]],inputs:{name:"name",accepts:"accepts"},decls:2,vars:3,consts:[[1,"dustbin","pad",3,"dropTarget","style"],[1,"dustbin","pad",3,"dropTarget"],[3,"click"]],template:function(t,p){if(t&1&&(l(0,z,10,11,"div",0),u(1,"async")),t&2){let g;v((g=y(1,1,p.collected$))?0:-1,g)}},dependencies:[E,A,S,V],encapsulation:2})}}return n})();var O=(()=>{class n{constructor(){this.type="",this.empty=!1,this.inFlight=!1}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275cmp=c({type:n,selectors:[["app-trash"]],inputs:{type:"type",empty:"empty",inFlight:"inFlight"},decls:3,vars:5,consts:[[1,"trash","pad"],[1,"type"]],template:function(t,p){t&1&&(i(0,"div",0)(1,"span",1),r(2),o()()),t&2&&(x("empty",p.empty)("in-flight",p.inFlight),a(2),b(p.type))},styles:[".trash[_ngcontent-%COMP%]{background:#fcf}.empty[_ngcontent-%COMP%]{background:#eee}.empty[_ngcontent-%COMP%]   .type[_ngcontent-%COMP%]{visibility:hidden}.in-flight[_ngcontent-%COMP%]{width:100px;background-clip:padding-box;border:2px solid rgba(0,0,0,.1)}"],changeDetection:0})}}return n})();function G(n,h){if(n&1){let e=T();i(0,"p")(1,"button",0),D("click",function(){C(e);let p=d();return _(p.litter())}),r(2,"add more"),o(),i(3,"span"),r(4),o()(),i(5,"div",1),m(6,"app-trash",2),o()}if(n&2){let e=h,t=d();a(4),P("(",t.remain," left)"),a(),x("dragging",e.isDragging&&t.remain>1),s("dragSource",t.trashSource),a(),s("type",t.type)("empty",t.remain===0||e.isDragging&&t.remain===1)}}var H=(()=>{class n{constructor(){this.dnd=f(M),this.type="",this.remain=5,this.count=0,this.trashSource=this.dnd.dragSource(null,{canDrag:e=>this.remain>0,beginDrag:e=>({count:this.count++}),endDrag:e=>{e.didDrop()&&this.remain--}}),this.isDragging$=this.trashSource.listen(e=>e.isDragging()),this.collected$=this.trashSource.listen(e=>({isDragging:e.isDragging(),canDrag:e.canDrag(),itemType:e.getItemType()}))}ngOnChanges(){this.trashSource.setType(this.type)}ngOnDestroy(){this.trashSource.unsubscribe()}litter(){this.remain+=5}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275cmp=c({type:n,selectors:[["app-trash-pile"]],inputs:{type:"type"},features:[F],decls:2,vars:3,consts:[[3,"click"],[3,"dragSource"],[3,"type","empty"]],template:function(t,p){if(t&1&&(l(0,G,7,6),u(1,"async")),t&2){let g;v((g=y(1,1,p.collected$))?0:-1,g)}},dependencies:[E,L,O,S],encapsulation:2})}}return n})();var K=()=>["PAPER","ENVELOPE"],Q=()=>["PARCEL","ENVELOPE"];function U(n,h){if(n&1&&m(0,"app-trash",7),n&2){let e=h.$implicit;s("type",e)("inFlight",!0)}}var J=(()=>{class n{static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275cmp=c({type:n,selectors:[["ng-component"]],decls:19,vars:4,consts:[["path","bins"],[1,"bins"],["type","PAPER"],["type","ENVELOPE"],["type","PARCEL"],["name","recycle",3,"accepts"],["name","mailbox",3,"accepts"],[3,"type","inFlight"]],template:function(t,p){t&1&&(m(0,"app-example-link",0),i(1,"p"),r(2,"This example demonstrates:"),o(),i(3,"ul")(4,"li"),r(5,"Making components conditionally draggable"),o(),i(6,"li"),r(7,"Making targets conditionally available for drops"),o(),i(8,"li"),r(9,"How drop targets can accept different item types"),o()(),i(10,"dnd-preview"),l(11,U,1,2,"ng-template"),o(),i(12,"div",1),m(13,"app-trash-pile",2)(14,"app-trash-pile",3)(15,"app-trash-pile",4),o(),i(16,"div",1),m(17,"app-bin",5)(18,"app-bin",6),o()),t&2&&(a(17),s("accepts",w(2,K)),a(),s("accepts",w(3,Q)))},dependencies:[R,$,N,O,H,j],styles:[".bins[_ngcontent-%COMP%]{margin-top:20px;display:flex}.bins[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{flex:1;min-width:100px}.bins[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]:not(:last-child){margin-right:4px}"]})}}return n})();var Ct=[{path:"",component:J}];export{Ct as routes};
