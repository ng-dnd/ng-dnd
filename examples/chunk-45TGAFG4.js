import{b as Y,f as Z,g as _,h as ee,j as te}from"./chunk-RLYW3YTY.js";import{a as S,b as J}from"./chunk-4V2YVVCM.js";import{a as X,b as w}from"./chunk-3WHGAJMI.js";import{a as ge}from"./chunk-HURIPXSG.js";import{c as C,e as p,f as q,i as G}from"./chunk-NIW5CEAP.js";import{a as Q}from"./chunk-HQODWAYX.js";import{Ab as h,Ib as b,Nb as d,Ob as c,Qa as m,Ra as x,bb as K,db as H,g as xe,ib as j,jb as N,kb as U,lb as s,mb as a,mc as k,na as u,nb as g,pb as W,qb as V,ra as F,rb as I,tc as z,xa as R,xc as A,ya as $,yb as v,zb as o}from"./chunk-NAC6KBNY.js";function y(e){let r=5381;for(let t=0;t<e.length;t++)r=(r<<5)+r+e.charCodeAt(t);return r}var re=(()=>{class e extends w({id:0,hash:y(""),content:""}){static{this.nextId=0}static create(t){return new e({id:e.nextId++,content:t,hash:y(t)})}}return e})();var oe=xe(ge()),l=function(e){return e.SORT="[simple-ngrx] SORT",e.KB_SELECT="[simple-ngrx] KB_SELECT",e.KB_LIFT="[simple-ngrx] KB_LIFT",e.KB_DROP="[simple-ngrx] KB_DROP",e.KB_UP="[simple-ngrx] KB_UP",e.KB_DOWN="[simple-ngrx] KB_DOWN",e}(l||{}),B=class{constructor(r){this.id=r,this.type=l.KB_SELECT}},L=class{constructor(){this.type=l.KB_LIFT}},M=class{constructor(){this.type=l.KB_DROP}},D=class{constructor(){this.type=l.KB_UP}},O=class{constructor(){this.type=l.KB_DOWN}},Se=()=>oe.fake("/home/mezcal/{{system.fileName}}"),E=class extends w({list:X(Array.from(new Array(6),Se).map(re.create)),draggingList:null,flying:null,kbSelected:0,kbLifted:!1}){};function _e(e=new E,r){let{index:t,hover:n,data:i}=r.item;switch(r.event){case _.BeginDrag:return e.set("draggingList",e.list.remove(t)).set("flying",r.item).set("kbSelected",r.item.data.id).set("kbLifted",!1);case _.Hover:return e.set("flying",r.item);case _.Drop:return e.set("list",e.draggingList.insert(n.index,i)).delete("draggingList").delete("flying").set("kbSelected",r.item.data.id).set("kbLifted",!1);case _.EndDrag:return e.delete("draggingList").delete("flying").set("kbSelected",r.item.data.id).set("kbLifted",!1);default:return e}}function ne(e){return e.list.findIndex(r=>r.id===e.kbSelected)}function ie(e,r,t){if(t=Math.max(0,Math.min(e.list.count()-1,t)),!e.kbLifted)return e.set("kbSelected",e.list.get(t).id);let n=e.list.get(r);return e.update("list",i=>i.remove(r).insert(t,n))}function se(e=new E,r){switch(r.type){case l.SORT:return _e(e,r);case l.KB_SELECT:return e.set("kbSelected",r.id);case l.KB_LIFT:return e.set("kbLifted",!e.kbLifted);case l.KB_DROP:return e.set("kbLifted",!1);case l.KB_UP:{let t=ne(e);return ie(e,t,t-1)}case l.KB_DOWN:{let t=ne(e);return ie(e,t,t+1)}}return e}var P=q("simple-ngrx"),T=p(P,e=>{let{flying:r}=e,t=e.draggingList||e.list;if(r!=null){let{hover:n,data:i}=r;return t.insert(n.index,i)}return t}),ye=p(P,e=>e.list),ae=e=>y(e.map(r=>""+r.id+r.hash.toString()).toArray().join(" ")),le=p(T,ae),de=p(ye,ae),ce=p(P,e=>e.kbSelected),me=p(P,e=>e.kbLifted?e.kbSelected:-1);function ke(e,r){if(e&1){let t=W();s(0,"tr",4,1),d(2,"async"),d(3,"async"),d(4,"async"),V("click",function(){let i=R(t).$implicit,f=I();return $(f.click(i))}),s(5,"td",5)(6,"code"),o(7),a()(),s(8,"td"),o(9),a()()}if(e&2){let t=r.$implicit,n=r.$index,i=v(1),f=I(),be=v(1);H("blob--placeholder",c(2,10,i.isDragging$))("blob--selected",t.id===c(3,12,f.selected$))("blob--lifted",t.id===c(4,14,f.lifted$)),K("dndSortableRender",be.contextFor(t,n))("dragSource",i.source),m(7),h(t.hash),m(2),h(t.content)}}var fe=(()=>{class e{constructor(t,n){this.store=t,this.hotkeys=n,this.rxSpec=new ee(this.store,l.SORT,{type:"BLOB",trackBy:i=>i.id,getList:i=>this.store.select(T)}),this.selected$=this.store.select(ce),this.lifted$=this.store.select(me),this.hotkeys.add(new S("enter",i=>(this.store.dispatch(new L),!1),[],"Lift up or put down selected item")),this.hotkeys.add(new S("up",i=>(this.store.dispatch(new D),!1),[],"Move selection or lifted item up")),this.hotkeys.add(new S("down",i=>(this.store.dispatch(new O),!1),[],"Move selection or lifted item down")),this.hotkeys.add(new S("esc",i=>(this.store.dispatch(new M),!1),[],"Put down lifted item"))}click(t){this.store.dispatch(new B(t.id))}static{this.\u0275fac=function(n){return new(n||e)(x(C),x(J))}}static{this.\u0275cmp=u({type:e,selectors:[["rxsort-sortable"]],standalone:!0,features:[b],decls:12,vars:3,consts:[["sortable","dndSortable"],["render","dndSortableRender"],["dndSortable","",1,"list",3,"spec"],[3,"dndSortableRender","dragSource","blob--placeholder","blob--selected","blob--lifted"],[3,"click","dndSortableRender","dragSource"],[1,"hash"]],template:function(n,i){if(n&1&&(s(0,"table",2,0)(2,"thead")(3,"tr")(4,"th"),o(5,"Hash"),a(),s(6,"th"),o(7,"Filename"),a()()(),s(8,"tbody"),N(9,ke,10,16,"tr",3,j),d(11,"async"),a()()),n&2){let f=v(1);K("spec",i.rxSpec),m(9),U(c(11,1,f.children$))}},dependencies:[A,z,te,Y,Z,k],styles:["tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{cursor:move;color:#b73030;background:#8eae0f1a}td[_ngcontent-%COMP%]{padding:4px}.blob--selected[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{background:#d6ddbe}tr.blob--lifted[_ngcontent-%COMP%]{transform:translate(8px)}tr.blob--lifted[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{background:#f9d456}td.hash[_ngcontent-%COMP%]{background:#8eae0f4d;text-align:right}td.hash[_ngcontent-%COMP%]   code[_ngcontent-%COMP%]{background:none}.blob--placeholder[_ngcontent-%COMP%]{opacity:.4}"],changeDetection:0})}}return e})();var ue=(()=>{class e{constructor(t){this.store=t,this.unstable$=this.store.select(le),this.stable$=this.store.select(de)}static{this.\u0275fac=function(n){return new(n||e)(x(C))}}static{this.\u0275cmp=u({type:e,selectors:[["rxsort-summary"]],standalone:!0,features:[b],decls:10,vars:6,template:function(n,i){n&1&&(s(0,"p"),o(1," Hash of the unstable list: "),s(2,"code"),o(3),d(4,"async"),a(),g(5,"br"),o(6," Hash of the stable list: "),s(7,"code"),o(8),d(9,"async"),a()()),n&2&&(m(3),h(c(4,2,i.unstable$)),m(5),h(c(9,4,i.stable$)))},dependencies:[k],encapsulation:2})}}return e})();var he=(()=>{class e{static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275cmp=u({type:e,selectors:[["rxsort-container"]],standalone:!0,features:[b],decls:24,vars:0,consts:[["path","sortable/keyboard"],[1,"sep"]],template:function(n,i){n&1&&(g(0,"app-example-link",0),s(1,"p"),o(2," This one uses an "),s(3,"code"),o(4,"@ngrx/store"),a(),o(5," with Immutable.js data. This is very convenient, since Immutable.js has its own 'insert' and 'remove' operations. "),a(),s(6,"p"),o(7,"It also is a demo for"),a(),s(8,"ul")(9,"li"),o(10," Sorting overlaid on bare HTML table rows using the "),s(11,"code"),o(12,"dndSortable"),a(),o(13," directive, without intermediate DOM nodes. "),a(),s(14,"li"),o(15," Keyboard driven sorting, using "),s(16,"code"),o(17,"angular2-mousetrap"),a(),o(18,". Try using the arrow keys and enter to lift/put down. "),a(),s(19,"li"),o(20," Selectors based on the 'unstable' / 'in-flight' rendered list, and the 'stable' / 'saved' one. "),a()(),g(21,"rxsort-summary")(22,"div",1)(23,"rxsort-sortable"))},dependencies:[Q,ue,fe],styles:[".sep[_ngcontent-%COMP%]{border-bottom:1px solid #999;margin-bottom:8px;max-width:700px}"]})}}return e})();var nt=[{path:"",component:he,providers:[F([G.forFeature("simple-ngrx",se)])]}];export{nt as routes};
