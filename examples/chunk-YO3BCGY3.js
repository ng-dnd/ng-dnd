import{b as X,f as Y,g as S,h as Z,j as ee}from"./chunk-46UH37UU.js";import{a as g,b as G}from"./chunk-IXRN3ZYE.js";import{a as Q,b as C}from"./chunk-2DCQZEBW.js";import{a as xe}from"./chunk-IUQVEQNP.js";import{c as k,e as p,f as A,i as q}from"./chunk-IQPDUMMD.js";import{a as J}from"./chunk-T55MMTBF.js";import{Db as y,Eb as i,Fb as h,Pa as m,Rb as a,Sb as c,Ya as u,g as be,gb as P,ib as $,ja as b,lc as v,na as R,nb as H,ob as N,pb as j,qb as o,rb as s,sb as x,ta as I,tc as V,ua as F,ub as U,vb as W,wb as K,xc as z}from"./chunk-C7W2QAC5.js";function _(e){let r=5381;for(let t=0;t<e.length;t++)r=(r<<5)+r+e.charCodeAt(t);return r}var te=(()=>{class e extends C({id:0,hash:_(""),content:""}){static{this.nextId=0}static create(t){return new e({id:e.nextId++,content:t,hash:_(t)})}}return e})();var ie=be(xe()),d=function(e){return e.SORT="[simple-ngrx] SORT",e.KB_SELECT="[simple-ngrx] KB_SELECT",e.KB_LIFT="[simple-ngrx] KB_LIFT",e.KB_DROP="[simple-ngrx] KB_DROP",e.KB_UP="[simple-ngrx] KB_UP",e.KB_DOWN="[simple-ngrx] KB_DOWN",e}(d||{}),w=class{constructor(r){this.id=r,this.type=d.KB_SELECT}},B=class{constructor(){this.type=d.KB_LIFT}},L=class{constructor(){this.type=d.KB_DROP}},M=class{constructor(){this.type=d.KB_UP}},D=class{constructor(){this.type=d.KB_DOWN}},ge=()=>ie.fake("/home/mezcal/{{system.fileName}}"),O=class extends C({list:Q(Array.from(new Array(6),ge).map(te.create)),draggingList:null,flying:null,kbSelected:0,kbLifted:!1}){};function Se(e=new O,r){let{index:t,hover:n,data:l}=r.item;switch(r.event){case S.BeginDrag:return e.set("draggingList",e.list.remove(t)).set("flying",r.item).set("kbSelected",r.item.data.id).set("kbLifted",!1);case S.Hover:return e.set("flying",r.item);case S.Drop:return e.set("list",e.draggingList.insert(n.index,l)).delete("draggingList").delete("flying").set("kbSelected",r.item.data.id).set("kbLifted",!1);case S.EndDrag:return e.delete("draggingList").delete("flying").set("kbSelected",r.item.data.id).set("kbLifted",!1);default:return e}}function re(e){return e.list.findIndex(r=>r.id===e.kbSelected)}function ne(e,r,t){if(t=Math.max(0,Math.min(e.list.count()-1,t)),!e.kbLifted)return e.set("kbSelected",e.list.get(t).id);let n=e.list.get(r);return e.update("list",l=>l.remove(r).insert(t,n))}function oe(e=new O,r){switch(r.type){case d.SORT:return Se(e,r);case d.KB_SELECT:return e.set("kbSelected",r.id);case d.KB_LIFT:return e.set("kbLifted",!e.kbLifted);case d.KB_DROP:return e.set("kbLifted",!1);case d.KB_UP:{let t=re(e);return ne(e,t,t-1)}case d.KB_DOWN:{let t=re(e);return ne(e,t,t+1)}}return e}var E=A("simple-ngrx"),T=p(E,e=>{let{flying:r}=e,t=e.draggingList||e.list;if(r!=null){let{hover:n,data:l}=r;return t.insert(n.index,l)}return t}),_e=p(E,e=>e.list),se=e=>_(e.map(r=>""+r.id+r.hash.toString()).toArray().join(" ")),le=p(T,se),de=p(_e,se),ae=p(E,e=>e.kbSelected),ce=p(E,e=>e.kbLifted?e.kbSelected:-1);function ye(e,r){if(e&1){let t=U();o(0,"tr",4,1),a(2,"async"),a(3,"async"),a(4,"async"),W("click",function(){let l=I(t).$implicit,f=K();return F(f.click(l))}),o(5,"td",5)(6,"code"),i(7),s()(),o(8,"td"),i(9),s()()}if(e&2){let t=r.$implicit,n=r.$index,l=y(1),f=K(),he=y(1);$("blob--placeholder",c(2,10,l.isDragging$))("blob--selected",t.id===c(3,12,f.selected$))("blob--lifted",t.id===c(4,14,f.lifted$)),P("dndSortableRender",he.contextFor(t,n))("dragSource",l.source),m(7),h(t.hash),m(2),h(t.content)}}var pe=(()=>{class e{constructor(){this.store=b(k),this.hotkeys=b(G),this.rxSpec=new Z(this.store,d.SORT,{type:"BLOB",trackBy:t=>t.id,getList:t=>this.store.select(T)}),this.selected$=this.store.select(ae),this.lifted$=this.store.select(ce),this.hotkeys.add(new g("enter",t=>(this.store.dispatch(new B),!1),[],"Lift up or put down selected item")),this.hotkeys.add(new g("up",t=>(this.store.dispatch(new M),!1),[],"Move selection or lifted item up")),this.hotkeys.add(new g("down",t=>(this.store.dispatch(new D),!1),[],"Move selection or lifted item down")),this.hotkeys.add(new g("esc",t=>(this.store.dispatch(new L),!1),[],"Put down lifted item"))}click(t){this.store.dispatch(new w(t.id))}static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275cmp=u({type:e,selectors:[["rxsort-sortable"]],decls:12,vars:3,consts:[["sortable","dndSortable"],["render","dndSortableRender"],["dndSortable","",1,"list",3,"spec"],[3,"dndSortableRender","dragSource","blob--placeholder","blob--selected","blob--lifted"],[3,"click","dndSortableRender","dragSource"],[1,"hash"]],template:function(n,l){if(n&1&&(o(0,"table",2,0)(2,"thead")(3,"tr")(4,"th"),i(5,"Hash"),s(),o(6,"th"),i(7,"Filename"),s()()(),o(8,"tbody"),N(9,ye,10,16,"tr",3,H),a(11,"async"),s()()),n&2){let f=y(1);P("spec",l.rxSpec),m(9),j(c(11,1,f.children$))}},dependencies:[z,V,ee,X,Y,v],styles:["tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{cursor:move;color:#b73030;background:#8eae0f1a}td[_ngcontent-%COMP%]{padding:4px}.blob--selected[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{background:#d6ddbe}tr.blob--lifted[_ngcontent-%COMP%]{transform:translate(8px)}tr.blob--lifted[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{background:#f9d456}td.hash[_ngcontent-%COMP%]{background:#8eae0f4d;text-align:right}td.hash[_ngcontent-%COMP%]   code[_ngcontent-%COMP%]{background:none}.blob--placeholder[_ngcontent-%COMP%]{opacity:.4}"],changeDetection:0})}}return e})();var fe=(()=>{class e{constructor(){this.store=b(k),this.unstable$=this.store.select(le),this.stable$=this.store.select(de)}static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275cmp=u({type:e,selectors:[["rxsort-summary"]],decls:10,vars:6,template:function(n,l){n&1&&(o(0,"p"),i(1," Hash of the unstable list: "),o(2,"code"),i(3),a(4,"async"),s(),x(5,"br"),i(6," Hash of the stable list: "),o(7,"code"),i(8),a(9,"async"),s()()),n&2&&(m(3),h(c(4,2,l.unstable$)),m(5),h(c(9,4,l.stable$)))},dependencies:[v],encapsulation:2})}}return e})();var ue=(()=>{class e{static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275cmp=u({type:e,selectors:[["rxsort-container"]],decls:24,vars:0,consts:[["path","sortable/keyboard"],[1,"sep"]],template:function(n,l){n&1&&(x(0,"app-example-link",0),o(1,"p"),i(2," This one uses an "),o(3,"code"),i(4,"@ngrx/store"),s(),i(5," with Immutable.js data. This is very convenient, since Immutable.js has its own 'insert' and 'remove' operations. "),s(),o(6,"p"),i(7,"It also is a demo for"),s(),o(8,"ul")(9,"li"),i(10," Sorting overlaid on bare HTML table rows using the "),o(11,"code"),i(12,"dndSortable"),s(),i(13," directive, without intermediate DOM nodes. "),s(),o(14,"li"),i(15," Keyboard driven sorting, using "),o(16,"code"),i(17,"angular2-mousetrap"),s(),i(18,". Try using the arrow keys and enter to lift/put down. "),s(),o(19,"li"),i(20," Selectors based on the 'unstable' / 'in-flight' rendered list, and the 'stable' / 'saved' one. "),s()(),x(21,"rxsort-summary")(22,"div",1)(23,"rxsort-sortable"))},dependencies:[J,fe,pe],styles:[".sep[_ngcontent-%COMP%]{border-bottom:1px solid #999;margin-bottom:8px;max-width:700px}"]})}}return e})();var lt=[{path:"",component:ue,providers:[R([q.forFeature("simple-ngrx",oe)])]}];export{lt as routes};
