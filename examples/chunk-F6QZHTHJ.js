import{b as be,d as xe,e as _e,f as ve,g as ye,i as Se,k as ke,l as De,n as we}from"./chunk-3OBIFKRL.js";import{a as Ie,b as Me,c as Te,d as Oe,e as Pe,f as E,g as v,h as ee,i as Ee,j as F}from"./chunk-46UH37UU.js";import{a as Je}from"./chunk-IUQVEQNP.js";import{c as P,d as G,e as D,f as ge,i as he}from"./chunk-IQPDUMMD.js";import{e as fe,f as ue}from"./chunk-RPUZJCG6.js";import"./chunk-AZZEJM65.js";import{a as Ce}from"./chunk-T55MMTBF.js";import{Aa as I,Db as R,E as oe,Ea as pe,Eb as f,Fb as j,Pa as h,Rb as A,Sb as N,Ya as C,a as s,ab as y,b as l,da as ae,g as qe,gb as c,ib as M,ja as m,jb as L,lb as U,lc as $,mb as T,na as de,ob as X,pb as Z,qb as o,rb as a,sb as u,sc as me,ta as se,tc as H,ua as le,ub as ce,vb as k,wb as x,xc as O,zc as z}from"./chunk-C7W2QAC5.js";var _={CARD:"KANBAN_CARD",LIST:"KANBAN_LIST"};var B=(()=>{class e{constructor(){this.preview=!1,this.placeholder=!1}static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275cmp=C({type:e,selectors:[["kanban-card"]],inputs:{card:"card",preview:"preview",placeholder:"placeholder"},decls:3,vars:5,consts:[[1,"card"]],template:function(n,i){n&1&&(o(0,"div",0)(1,"p"),f(2),a()()),n&2&&(M("card--preview",i.preview)("card--placeholder",i.placeholder),h(2),j(i.card.title))},styles:['[_nghost-%COMP%]{display:block}.card[_ngcontent-%COMP%]{padding:8px;border-radius:4px;position:relative;-webkit-user-select:none;user-select:none;background:#fff;box-shadow:0 1px 3px #00000014,0 1px 2px #00000029}.card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}.card--preview[_ngcontent-%COMP%]{transform:rotate(-2deg);width:100%;height:100%;box-shadow:0 8px 16px #00000040,0 6px 6px #00000021}.card--placeholder[_ngcontent-%COMP%]{background:none;box-shadow:none}.card--placeholder[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{visibility:hidden}.card--placeholder[_ngcontent-%COMP%]:before{content:"";border-radius:4px;background:#00000021;box-shadow:inset 0 3px 7px #00000021,inset 0 1px 3px #00000038;position:absolute;top:0;left:0;width:100%;height:100%}']})}}return e})();var p=qe(Je());function V(e,r){let t=e.slice(0);return r(t),t}function Fe(e,r,t){let n=e.findIndex(d=>d.id===r);if(n===-1)return e;let i=l(s({},e[n]),{cards:V(e[n].cards,t)});return V(e,d=>{d.splice(n,1,i)})}function te(e,r,t){return V(e,n=>{n.splice(t,0,r)})}function Be(e,r){return V(e,t=>{t.splice(r,1)})}function ne(e,r,t){return Fe(e,r,n=>{n.splice(t,1)})}function W(e,r,t,n){return Fe(e,t,i=>{i.splice(n,0,r)})}var Ke=[{id:0,title:"To Do",cards:[{id:1,title:p.lorem.sentence()},{id:2,title:p.lorem.sentence()},{id:3,title:p.lorem.sentence()},{id:4,title:p.lorem.sentence()},{id:5,title:"This card is a bigger than the other ones. "+p.lorem.sentence()+" "+p.lorem.sentence()}]},{id:1,title:"Doing",cards:[{id:6,title:p.company.bs()},{id:7,title:p.company.bs()},{id:8,title:p.company.bs()},{id:9,title:p.company.bs()},{id:10,title:p.company.bs()}]},{id:2,title:"Done",cards:[{id:11,title:p.name.jobTitle()},{id:12,title:p.name.jobTitle()},{id:13,title:p.name.jobTitle()},{id:14,title:p.name.jobTitle()},{id:15,title:p.name.jobTitle()}]}];var b=function(e){return e.SortList="[Kanban] SortList",e.SortCard="[Kanban] SortCard",e.AddCard="[Kanban] AddCard",e.RemoveCard="[Kanban] RemoveCard",e.Spill="[Kanban] Spill",e}(b||{}),Y=class{constructor(r,t){this.listId=r,this.title=t,this.type=b.AddCard}},q=class{constructor(r){this.item=r,this.type=b.RemoveCard}},J=class{constructor(r){this.item=r,this.type=b.Spill}},Qe={board:Ke,draggingBoard:null,cardInFlight:null,listInFlight:null,nextId:1e3,spilledCard:!1,isCopying:!1,shouldCopy:!1},K=e=>l(s({},e),{draggingBoard:null,cardInFlight:null,listInFlight:null,isCopying:!1,spilledCard:!1}),re=Symbol("CLONED_CARD"),Le=(e,r)=>l(s({},e),{id:r}),Re=(e,r)=>{let{board:t,nextId:n}=e;if(e.cardInFlight){let{data:i,hover:d}=e.cardInFlight;if(e.isCopying)n++,t=e.spilledCard?e.board:W(e.board,r,d.listId,d.index);else{let g=e.draggingBoard||e.board;t=e.spilledCard?g:W(g,i,d.listId,d.index)}}return l(s({},K(e)),{board:t,nextId:n})};function Ue(e,r){let t=e.draggingBoard||e.board,{data:n,index:i,listId:d,hover:g}=r.item;switch(r.event){case v.BeginDrag:return l(s({},e),{draggingBoard:Be(e.board,i),listInFlight:r.item});case v.Hover:return l(s({},e),{listInFlight:r.item});case v.Drop:return l(s({},K(e)),{board:te(t,n,g.index)});case v.EndDrag:return K(e);default:return e}}function Xe(e,r){let{data:t,index:n,listId:i,hover:d}=r.item;switch(e=l(s({},e),{spilledCard:!1}),r.event){case v.BeginDrag:return l(s({},e),{draggingBoard:ne(e.board,i,n),cardInFlight:r.item,isCopying:e.shouldCopy&&i===1});case v.Hover:return l(s({},e),{cardInFlight:r.item});case v.Drop:return Re(e,Le(e.cardInFlight.data,e.nextId));case v.EndDrag:return K(e);default:return e}}function Ae(e=Qe,r){let t=e.draggingBoard||e.board;switch(r.type){case b.SortList:return Ue(e,r);case b.SortCard:return Xe(e,r);case b.AddCard:{let n={id:e.nextId,title:r.title},d=t.find(g=>g.id===r.listId).cards.length;return l(s({},K(e)),{board:W(e.board,n,r.listId,d),nextId:e.nextId+1})}case b.RemoveCard:{let{listId:n,index:i}=r.item;return l(s({},K(e)),{board:ne(e.board,n,i)})}case b.Spill:return l(s({},e),{spilledCard:!0,cardInFlight:r.item});default:return e}}var Q=ge("kanban"),ie=D(Q,e=>e.isCopying),Ze=D(Q,e=>e.cardInFlight),et=D(ie,Ze,(e,r)=>e&&r?Le(r.data,re):null),tt=D(Q,e=>e.board),Ne=e=>D(tt,r=>{let t=r.find(n=>n.id===e);return t&&t.cards}),je=D(Q,et,(e,r)=>{let{cardInFlight:t,listInFlight:n}=e,i=e.draggingBoard||e.board;if(t!=null)return Re(e,r).board;if(n!=null){let{hover:d,data:g}=n;return te(i,g,d.index)}return i});var S=(()=>{class e{constructor(){this.store=m(P),this.boardSpec=new ee(this.store,b.SortList,{type:_.LIST,trackBy:t=>t.id,getList:t=>this.store.pipe(G(je))}),this.isCopying=!1,this.subs=this.store.pipe(G(ie)).subscribe(t=>this.isCopying=t),this.listSpec=new ee(this.store,b.SortCard,{type:_.CARD,trackBy:t=>t.id,getList:t=>this.store.pipe(G(Ne(t)),oe(n=>n!=null)),isDragging:(t,n)=>{let i=this.isCopying?re:n.data.id;return t.id===i}})}ngOnDestroy(){this.subs.unsubscribe()}static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275prov=ae({token:e,factory:e.\u0275fac})}}return e})();var He=(()=>{class e{constructor(){this.specs=m(S),this.ItemTypes=_,this.card={id:1337,title:"External card - drag me in!"},this.nextId=3e6,this.externalSpec=l(s({},this.specs.listSpec),{beginDrag:()=>{},createData:()=>({id:this.nextId++,title:this.card.title})})}static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275cmp=C({type:e,selectors:[["kanban-external"]],decls:3,vars:4,consts:[["ext","dndSortableExternal"],[1,"ext"],[3,"dndSortableExternal","card","dragSource","noHTML5Preview"]],template:function(n,i){if(n&1&&(o(0,"div",1),u(1,"kanban-card",2,0),a()),n&2){let d=R(2);h(),c("dndSortableExternal",i.externalSpec)("card",i.card)("dragSource",d.source)("noHTML5Preview",!0)}},dependencies:[B,F,Te,O,H],styles:[".ext[_ngcontent-%COMP%]{margin-right:8px;margin-bottom:8px;display:inline-block}"]})}}return e})();var ze=(()=>{class e{constructor(){this.add=new I,this.addForm=new ve({title:new ye})}onSubmit(){this.add.emit(this.addForm.get("title")?.value),this.addForm.reset()}static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275cmp=C({type:e,selectors:[["kanban-add-card"]],outputs:{add:"add"},decls:2,vars:1,consts:[[3,"formGroup"],["placeholder","Add a card","formControlName","title",1,"title",3,"keyup.enter"]],template:function(n,i){n&1&&(o(0,"form",0)(1,"input",1),k("keyup.enter",function(){return i.onSubmit()}),a()()),n&2&&c("formGroup",i.addForm)},dependencies:[we,Se,be,xe,_e,ke,De],styles:[".title[_ngcontent-%COMP%]{box-sizing:border-box;border:none;width:100%;background:#0000;padding:6px 8px}.title[_ngcontent-%COMP%]:focus{background:#fff}"]})}}return e})();function rt(e,r){if(e&1&&(u(0,"kanban-card",7,1),A(2,"async")),e&2){let t=r.$implicit,n=r.$index,i=R(1);x();let d=R(1);c("card",t)("dndSortableRender",d.contextFor(t,n))("dragSource",i.source)("noHTML5Preview",!0)("placeholder",!!N(2,5,i.isDragging$))}}function it(e,r){if(e&1&&(o(0,"div",4,0),X(2,rt,3,7,"kanban-card",7,U().trackById,!0),a()),e&2){let t=x();c("spec",t.specs.listSpec)("listId",t.list.id),h(2),Z(t.list.cards)}}function ot(e,r){if(e&1&&u(0,"kanban-card",8),e&2){let t=r.$implicit;c("card",t)}}function at(e,r){if(e&1&&(o(0,"div",5),X(1,ot,1,1,"kanban-card",8,U().trackById,!0),a()),e&2){let t=x();h(),Z(t.list.cards)}}var Ge=(()=>{class e{constructor(){this.specs=m(S),this.render=m(E,{optional:!0}),this.preview=!1,this.addCard=new I,this.placeholder$=this.render&&this.render.source.listen(t=>t.isDragging()),this.isOver$=this.render&&this.render.target.listen(t=>t.canDrop()&&t.isOver()),this.trackById=(t,n)=>n.id}ngOnInit(){}static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275cmp=C({type:e,selectors:[["kanban-list"]],inputs:{list:"list",preview:"preview"},outputs:{addCard:"addCard"},decls:8,vars:10,consts:[["clist","dndSortable"],["render","dndSortableRender"],[1,"list"],[1,"handle",3,"dragSource","noHTML5Preview"],["dndSortable","",1,"cards-container",3,"spec","listId"],[1,"cards-container"],[3,"add"],[3,"card","dndSortableRender","dragSource","noHTML5Preview","placeholder"],[3,"card"]],template:function(n,i){n&1&&(o(0,"div",2),A(1,"async"),o(2,"div",3)(3,"h3"),f(4),a()(),y(5,it,4,2,"div",4)(6,at,3,0,"div",5),o(7,"kanban-add-card",6),k("add",function(g){return i.addCard.emit(g)}),a()()),n&2&&(M("list--preview",i.preview)("list--placeholder",N(1,8,i.render==null?null:i.render.isDragging$)),h(2),c("dragSource",i.render==null?null:i.render.source)("noHTML5Preview",!0),h(2),j(i.list.title),h(),T(i.render?5:6))},dependencies:[O,H,F,Me,E,B,ze,$],styles:['.cards-container[_ngcontent-%COMP%]{min-height:20px}.cards-container[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin-bottom:6px}.list[_ngcontent-%COMP%]{position:relative;width:240px;padding:8px;border-radius:4px;-webkit-user-select:none;user-select:none;background:#eee;box-shadow:0 1px 3px #00000014,0 1px 2px #00000029}.list--preview[_ngcontent-%COMP%]{box-shadow:0 14px 28px #0003,0 10px 10px #0000001a}.list--placeholder[_ngcontent-%COMP%]{background:none;box-shadow:none}.list--placeholder[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{visibility:hidden}.list--placeholder[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;width:100%;height:100%;background:#00000021;border-radius:4px;box-shadow:inset 0 3px 7px #00000021,inset 0 1px 3px #00000038}.handle[_ngcontent-%COMP%]{margin:-8px;padding:8px}.handle[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 8px}'],changeDetection:0})}}return e})();function dt(e,r){if(e&1&&(o(0,"div",1)(1,"div"),u(2,"i",2),o(3,"span"),f(4,"Drop here to delete"),a()(),u(5,"div",3),a()),e&2){let t=r,n=x();M("isOver",t.isOver),c("dropTarget",n.target),h(5),L(n.getStyle(t.isOver,t.item))}}var Ve=(()=>{class e{constructor(){this.dnd=m(z),this.dropped=new I,this.target=this.dnd.dropTarget(_.CARD,{canDrop:t=>t.getItem().isInternal,drop:t=>{this.dropped.emit(t.getItem())}}),this.collect$=this.target.listen(t=>({item:t.getItem(),isOver:t.isOver()&&t.canDrop()}))}getStyle(t,n){return!t||!n?{}:l(s({},n.size.style()),{transition:"all 50ms ease-in"})}static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275cmp=C({type:e,selectors:[["kanban-trash-can"]],outputs:{dropped:"dropped"},decls:2,vars:3,consts:[[1,"trash-can",3,"isOver","dropTarget"],[1,"trash-can",3,"dropTarget"],[1,"fas","fa-trash-alt"],[1,"space"]],template:function(n,i){if(n&1&&(y(0,dt,6,5,"div",0),A(1,"async")),n&2){let d;T((d=N(1,1,i.collect$))?0:-1,d)}},dependencies:[O,me,$],styles:[".fas[_ngcontent-%COMP%]{margin-right:8px}.trash-can[_ngcontent-%COMP%]{margin:8px;padding:8px;font-weight:700;text-shadow:1px 1px rgba(255,255,255,.2);border-radius:4px;border:1px dashed #333;text-align:center;transform-origin:100% 100%;transition:transform 50ms ease-out}.space[_ngcontent-%COMP%]{height:0;width:0;transition:all 50ms ease-out}.isOver[_ngcontent-%COMP%]{transition:transform 50ms ease-in;background:#fff6;transform:scale(1.2)}"],changeDetection:0})}}return e})();function st(e,r){if(e&1&&u(0,"kanban-card",7),e&2){let t=x().item;L(t.size.style()),c("card",t.data)("preview",!0)}}function lt(e,r){if(e&1&&u(0,"kanban-list",8),e&2){let t=x().item;L(t.size.style()),c("list",t.data)("preview",!0)}}function pt(e,r){if(e&1&&y(0,st,1,4,"kanban-card",5)(1,lt,1,4,"kanban-list",6),e&2){let t,n=r.$implicit,i=x();T((t=n)===i.ItemTypes.CARD?0:t===i.ItemTypes.LIST?1:-1)}}function ct(e,r){if(e&1){let t=ce();o(0,"kanban-list",9),k("addCard",function(i){let d=se(t).$implicit,g=x();return le(g.addCard(d.data.id,i))}),a()}if(e&2){let t=r.$implicit;c("dndSortableRender",t)("list",t.data)}}var We=(()=>{class e{constructor(){this.store=m(P),this.specs=m(S),this.ItemTypes=_,this.hoverTrigger=Ie.fixed}addCard(t,n){this.store.dispatch(new Y(t,n))}removeCard(t){this.store.dispatch(new q(t))}static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275cmp=C({type:e,selectors:[["kanban-board"]],decls:7,vars:5,consts:[[3,"allBackends"],[1,"kanban-root",3,"hoverTrigger","listId","spec","horizontal"],["dndSortableTemplate",""],[1,"trash-zone"],[3,"dropped"],[3,"card","preview","style"],[3,"list","preview","style"],[3,"card","preview"],[3,"list","preview"],[3,"addCard","dndSortableRender","list"]],template:function(n,i){n&1&&(o(0,"dnd-preview",0),y(1,pt,2,1,"ng-template"),a(),o(2,"dnd-sortable-list",1),y(3,ct,1,2,"ng-template",2),a(),o(4,"div",3)(5,"kanban-trash-can",4),k("dropped",function(g){return i.removeCard(g)}),a(),u(6,"kanban-external"),a()),n&2&&(c("allBackends",!0),h(2),c("hoverTrigger",i.hoverTrigger)("listId",888)("spec",i.specs.boardSpec)("horizontal",!0))},dependencies:[ue,fe,F,Pe,Oe,E,B,Ge,He,Ve],styles:[".kanban-root[_ngcontent-%COMP%]{background:#828cca;flex:1;display:flex;min-height:500px;overflow-x:scroll;padding:8px;justify-content:flex-start}.kanban-root[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin-right:8px}.trash-zone[_ngcontent-%COMP%]{position:absolute;right:0;bottom:0;text-align:right}"],changeDetection:0})}}return e})();var Ye=(()=>{class e{constructor(){this.dnd=m(z),this.el=m(pe),this.store=m(P),this.cardSpill=Ee(this.dnd,_.CARD,{hover:t=>this.store.dispatch(new J(t))})}ngAfterViewInit(){this.cardSpill.connectDropTarget(this.el.nativeElement)}ngOnDestroy(){this.cardSpill.unsubscribe()}static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275cmp=C({type:e,selectors:[["kanban-container"]],decls:20,vars:0,consts:[[1,"text"],["path","sortable/kanban"],[1,"span","span--darkblue"],[1,"span","span--light"],[1,"relative"]],template:function(n,i){n&1&&(o(0,"div",0),u(1,"app-example-link",1),o(2,"p"),f(3," This example uses "),o(4,"code"),f(5,"@ng-dnd/sortable"),a(),f(6,". There are two kinds of sortable in play here: "),a(),o(7,"ul")(8,"li"),f(9,"One "),o(10,"span",2),f(11,"horizontal"),a(),f(12," one, whose 'cards' are the vertical lists. Try grabbing a whole list by its header, and reordering. "),a(),o(13,"li"),f(14,"Many "),o(15,"span",3),f(16,"vertical"),a(),f(17," ones, which contain the kanban cards. Try moving the cards between lists. "),a()()(),o(18,"div",4),u(19,"kanban-board"),a())},dependencies:[Ce,We],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column}.relative[_ngcontent-%COMP%]{position:relative}.text[_ngcontent-%COMP%]{background:#fff;max-width:800px}.span[_ngcontent-%COMP%]{border-radius:4px;padding:0 2px}.span--darkblue[_ngcontent-%COMP%]{background:#828cca;color:#fff}.span--light[_ngcontent-%COMP%]{background:#eee;color:#000;box-shadow:0 1px 3px #00000014,0 1px 2px #00000029}"]})}}return e})();var Wn=[{path:"",component:Ye,providers:[de([he.forFeature("kanban",Ae)]),S]}];export{Wn as routes};
