import{b as O}from"./chunk-UYXGNMTV.js";import{a as ie,d as y,e as S,f as u,i as re,j as w}from"./chunk-46UH37UU.js";import{e as ee,f as te}from"./chunk-RPUZJCG6.js";import"./chunk-AZZEJM65.js";import{a as ne}from"./chunk-T55MMTBF.js";import{Aa as z,Db as J,Ea as F,Eb as a,Fb as _,Pa as p,Rb as D,Sb as I,Tb as Q,Ya as m,a as B,ab as h,b as R,da as A,gb as s,ib as C,ja as c,jb as P,lb as H,lc as U,mb as N,ob as V,pb as W,qb as r,rb as o,sb as l,ta as $,tc as X,ua as j,ub as q,vb as G,wb as g,xc as Y,zc as Z}from"./chunk-C7W2QAC5.js";var f={LIST:"SIMPLE_KANBAN_LIST",CARD:"SIMPLE_KANBAN_CARD"};var T=(()=>{class t{constructor(){this.preview=!1,this.placeholder=!1}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275cmp=m({type:t,selectors:[["kanban-card"]],inputs:{card:"card",preview:"preview",placeholder:"placeholder"},decls:3,vars:5,consts:[[1,"card"]],template:function(n,i){n&1&&(r(0,"div",0)(1,"p"),a(2),o()()),n&2&&(C("card--preview",i.preview)("card--placeholder",i.placeholder),p(2),_(i.card.title))},styles:['[_nghost-%COMP%]{display:block}.card[_ngcontent-%COMP%]{padding:8px;border-radius:4px;position:relative;-webkit-user-select:none;user-select:none;background:#fff;box-shadow:0 1px 3px #00000014,0 1px 2px #00000029}.card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}.card--preview[_ngcontent-%COMP%]{transform:rotate(-2deg);width:100%;height:100%;box-shadow:0 8px 16px #00000040,0 6px 6px #00000021}.card--placeholder[_ngcontent-%COMP%]{background:none;box-shadow:none}.card--placeholder[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{visibility:hidden}.card--placeholder[_ngcontent-%COMP%]:before{content:"";border-radius:4px;background:#00000021;box-shadow:inset 0 3px 7px #00000021,inset 0 1px 3px #00000038;position:absolute;top:0;left:0;width:100%;height:100%}']})}}return t})();var b=(()=>{class t{constructor(){this.initialTree=[{id:1,title:"To Do",cards:[{listId:1,id:10,title:"Write a new song"},{listId:1,id:20,title:"Put the lyrics to music"}]},{id:2,title:"Doing",cards:[{listId:2,id:30,title:"Rig up the speakers"}]},{id:3,title:"Done",cards:[]}],this.savedTree=this.initialTree,this.tree=this.initialTree,this.boardSpec={type:f.LIST,trackBy:e=>e.id,hover:e=>{this.tree=this.moveList(e)},drop:e=>{this.tree=this.savedTree=this.moveList(e)},endDrag:e=>{this.tree=this.savedTree}},this.listSpec={type:f.CARD,trackBy:e=>e.id,hover:e=>{this.tree=this.moveCard(e)},drop:e=>{this.tree=this.savedTree=this.moveCard(e)},endDrag:e=>{this.tree=this.savedTree}}}moveList(e){return O(this.savedTree,n=>{e.isInternal&&n.splice(e.index,1),n.splice(e.hover.index,0,e.data)})}moveCard(e){return O(this.savedTree,n=>{let{listId:i,index:v}=e,{listId:x,index:E}=e.hover;console.info("from",i,v,"to",x,E);let L=n.find(k=>k.id===i),K=n.find(k=>k.id===x);if(!L||(e.isInternal&&L.cards.splice(v,1),!K))return;let de=R(B({},e.data),{listId:x});K.cards.splice(E,0,de)})}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275prov=A({token:t,factory:t.\u0275fac})}}return t})();function me(t,d){if(t&1&&(l(0,"kanban-card",6,1),D(2,"async")),t&2){let e=d.$implicit,n=J(1);s("dndSortableRender",e)("dragSource",n.source)("card",e.data)("noHTML5Preview",!0)("placeholder",!!I(2,5,n.isDragging$))}}function he(t,d){if(t&1&&l(0,"kanban-card",8),t&2){let e=d.$implicit;s("card",e)}}function ge(t,d){if(t&1&&(r(0,"div",7),V(1,he,1,1,"kanban-card",8,H().trackById,!0),o()),t&2){let e=g();p(),W(e.list.cards)}}var oe=(()=>{class t{constructor(){this.specs=c(b),this.render=c(u,{optional:!0}),this.preview=!1,this.addCard=new z,this.placeholder$=this.render&&this.render.source.listen(e=>e.isDragging()),this.isOver$=this.render&&this.render.target.listen(e=>e.canDrop()&&e.isOver()),this.trackById=(e,n)=>n.id}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275cmp=m({type:t,selectors:[["kanban-list"]],inputs:{list:"list",preview:"preview"},outputs:{addCard:"addCard"},decls:9,vars:12,consts:[["plain",""],["render","dndSortableRender"],[1,"list"],[1,"handle",3,"dragSource","noHTML5Preview"],[1,"cards-container",3,"spec","children","listId"],["dndSortableTemplate",""],[3,"dndSortableRender","dragSource","card","noHTML5Preview","placeholder"],[1,"cards-container"],[3,"card"]],template:function(n,i){n&1&&(r(0,"div",2),D(1,"async"),r(2,"div",3)(3,"h3"),a(4),o()(),r(5,"dnd-sortable-list",4),h(6,me,3,7,"ng-template",5),o(),h(7,ge,3,0,"ng-template",null,0,Q),o()),n&2&&(C("list--preview",i.preview)("list--placeholder",I(1,10,i.render==null?null:i.render.isDragging$)),p(2),s("dragSource",i.render==null?null:i.render.source)("noHTML5Preview",!0),p(2),_(i.list.title),p(),s("spec",i.specs.listSpec)("children",i.list.cards)("listId",i.list.id))},dependencies:[Y,X,w,S,y,u,T,U],styles:['.cards-container[_ngcontent-%COMP%]{min-height:20px}.cards-container[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin-bottom:6px}.list[_ngcontent-%COMP%]{position:relative;width:240px;padding:8px;border-radius:4px;-webkit-user-select:none;user-select:none;background:#eee;box-shadow:0 1px 3px #00000014,0 1px 2px #00000029}.list--preview[_ngcontent-%COMP%]{box-shadow:0 14px 28px #0003,0 10px 10px #0000001a}.list--placeholder[_ngcontent-%COMP%]{background:none;box-shadow:none}.list--placeholder[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{visibility:hidden}.list--placeholder[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;width:100%;height:100%;background:#00000021;border-radius:4px;box-shadow:inset 0 3px 7px #00000021,inset 0 1px 3px #00000038}.handle[_ngcontent-%COMP%]{margin:-8px;padding:8px}.handle[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 8px}']})}}return t})();function fe(t,d){if(t&1&&l(0,"kanban-card",5),t&2){let e=g().item;P(e.size.style()),s("card",e.data)("preview",!0)}}function ue(t,d){if(t&1&&l(0,"kanban-list",6),t&2){let e=g().item;P(e.size.style()),s("list",e.data)("preview",!0)}}function be(t,d){if(t&1&&h(0,fe,1,4,"kanban-card",3)(1,ue,1,4,"kanban-list",4),t&2){let e,n=d.$implicit,i=g();N((e=n)===i.ItemTypes.CARD?0:e===i.ItemTypes.LIST?1:-1)}}function xe(t,d){if(t&1){let e=q();r(0,"kanban-list",7),G("addCard",function(i){let v=$(e).$implicit,x=g();return j(x.addCard(v.data.id,i))}),o()}if(t&2){let e=d.$implicit;s("dndSortableRender",e)("list",e.data)}}var ae=(()=>{class t{constructor(){this.specs=c(b),this.ItemTypes=f,this.hoverTrigger=ie.fixed}addCard(e,n){}removeCard(e){}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275cmp=m({type:t,selectors:[["kanban-board"]],decls:4,vars:6,consts:[[3,"allBackends"],[1,"kanban-root",3,"hoverTrigger","listId","children","spec","horizontal"],["dndSortableTemplate",""],[3,"card","preview","style"],[3,"list","preview","style"],[3,"card","preview"],[3,"list","preview"],[3,"addCard","dndSortableRender","list"]],template:function(n,i){n&1&&(r(0,"dnd-preview",0),h(1,be,2,1,"ng-template"),o(),r(2,"dnd-sortable-list",1),h(3,xe,1,2,"ng-template",2),o()),n&2&&(s("allBackends",!0),p(2),s("hoverTrigger",i.hoverTrigger)("listId",888)("children",i.specs.tree)("spec",i.specs.boardSpec)("horizontal",!0))},dependencies:[te,ee,w,S,y,u,T,oe],styles:[".kanban-root[_ngcontent-%COMP%]{background:#50ddb0;flex:1;display:flex;min-height:500px;overflow-x:scroll;padding:8px;justify-content:flex-start}.kanban-root[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin-right:8px}.trash-zone[_ngcontent-%COMP%]{position:absolute;right:0;bottom:0;text-align:right}"]})}}return t})();var se=(()=>{class t{constructor(){this.dnd=c(Z),this.el=c(F),this.cardSpill=re(this.dnd,f.CARD,{})}ngAfterViewInit(){}ngOnDestroy(){this.cardSpill.unsubscribe()}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275cmp=m({type:t,selectors:[["kanban-container"]],decls:26,vars:0,consts:[[1,"text"],["path","sortable/simple-kanban"],[1,"span","span--darkblue"],[1,"span","span--light"],[1,"relative"]],template:function(n,i){n&1&&(r(0,"div",0),l(1,"app-example-link",1),r(2,"p"),a(3," This example uses "),r(4,"code"),a(5,"@ng-dnd/sortable"),o(),a(6," . It's similar to the other one, but doesn't use "),r(7,"code"),a(8,"ngrx"),o(),a(9," , just "),r(10,"code"),a(11,"Immer"),o(),a(12," . There are two kinds of sortable in play here: "),o(),r(13,"ul")(14,"li"),a(15," One "),r(16,"span",2),a(17,"horizontal"),o(),a(18," one, whose 'cards' are the vertical lists. Try grabbing a whole list by its header, and reordering. "),o(),r(19,"li"),a(20," Many "),r(21,"span",3),a(22,"vertical"),o(),a(23," ones, which contain the kanban cards. Try moving the cards between lists. "),o()()(),r(24,"div",4),l(25,"kanban-board"),o())},dependencies:[ne,ae],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column}.relative[_ngcontent-%COMP%]{position:relative}.text[_ngcontent-%COMP%]{background:#fff;max-width:800px}.span[_ngcontent-%COMP%]{border-radius:4px;padding:0 2px}.span--darkblue[_ngcontent-%COMP%]{background:#50ddb0;color:#fff}.span--light[_ngcontent-%COMP%]{background:#eee;color:#000;box-shadow:0 1px 3px #00000014,0 1px 2px #00000029}"],changeDetection:0})}}return t})();var it=[{path:"",component:se,providers:[b]}];export{it as routes};
