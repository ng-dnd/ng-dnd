import{b as _e,d as ye,e as Se,f as Ie,g as ke,i as De,k as we,l as Me,n as Te}from"./chunk-JXOD6KF3.js";import{a as Oe,b as Pe,c as Fe,d as Ee,e as Be,f as E,g as y,h as te,i as Ke,j as B}from"./chunk-RLYW3YTY.js";import{a as Ze}from"./chunk-HURIPXSG.js";import{c as F,d as V,e as D,f as be,i as xe}from"./chunk-NIW5CEAP.js";import{e as he,f as Ce}from"./chunk-LTS3YFHG.js";import"./chunk-SDQHVLFJ.js";import{a as ve}from"./chunk-HQODWAYX.js";import{$a as S,Ab as $,E as de,Ea as M,Ha as ue,Ib as b,Nb as j,Ob as N,Qa as h,Ra as C,a as s,b as l,bb as c,db as T,ea as se,eb as R,g as Xe,gb as X,hb as O,ja as le,jb as Z,kb as ee,lb as a,mb as d,mc as H,na as g,nb as u,pb as fe,qb as k,ra as pe,rb as v,sc as ge,tc as z,xa as ce,xc as P,ya as me,yb as A,zb as m,zc as G}from"./chunk-NAC6KBNY.js";var _={CARD:"KANBAN_CARD",LIST:"KANBAN_LIST"};var K=(()=>{class e{constructor(){this.preview=!1,this.placeholder=!1}static{this.\u0275fac=function(t){return new(t||e)}}static{this.\u0275cmp=g({type:e,selectors:[["kanban-card"]],inputs:{card:"card",preview:"preview",placeholder:"placeholder"},standalone:!0,features:[b],decls:3,vars:5,consts:[[1,"card"]],template:function(t,i){t&1&&(a(0,"div",0)(1,"p"),m(2),d()()),t&2&&(T("card--preview",i.preview)("card--placeholder",i.placeholder),h(2),$(i.card.title))},styles:['[_nghost-%COMP%]{display:block}.card[_ngcontent-%COMP%]{padding:8px;border-radius:4px;position:relative;-webkit-user-select:none;user-select:none;background:#fff;box-shadow:0 1px 3px #00000014,0 1px 2px #00000029}.card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}.card--preview[_ngcontent-%COMP%]{transform:rotate(-2deg);width:100%;height:100%;box-shadow:0 8px 16px #00000040,0 6px 6px #00000021}.card--placeholder[_ngcontent-%COMP%]{background:none;box-shadow:none}.card--placeholder[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{visibility:hidden}.card--placeholder[_ngcontent-%COMP%]:before{content:"";border-radius:4px;background:#00000021;box-shadow:inset 0 3px 7px #00000021,inset 0 1px 3px #00000038;position:absolute;top:0;left:0;width:100%;height:100%}']})}}return e})();var p=Xe(Ze());function W(e,r){let n=e.slice(0);return r(n),n}function Le(e,r,n){let t=e.findIndex(o=>o.id===r);if(t===-1)return e;let i=l(s({},e[t]),{cards:W(e[t].cards,n)});return W(e,o=>{o.splice(t,1,i)})}function ne(e,r,n){return W(e,t=>{t.splice(n,0,r)})}function Re(e,r){return W(e,n=>{n.splice(r,1)})}function re(e,r,n){return Le(e,r,t=>{t.splice(n,1)})}function Y(e,r,n,t){return Le(e,n,i=>{i.splice(t,0,r)})}var Ae=[{id:0,title:"To Do",cards:[{id:1,title:p.lorem.sentence()},{id:2,title:p.lorem.sentence()},{id:3,title:p.lorem.sentence()},{id:4,title:p.lorem.sentence()},{id:5,title:"This card is a bigger than the other ones. "+p.lorem.sentence()+" "+p.lorem.sentence()}]},{id:1,title:"Doing",cards:[{id:6,title:p.company.bs()},{id:7,title:p.company.bs()},{id:8,title:p.company.bs()},{id:9,title:p.company.bs()},{id:10,title:p.company.bs()}]},{id:2,title:"Done",cards:[{id:11,title:p.name.jobTitle()},{id:12,title:p.name.jobTitle()},{id:13,title:p.name.jobTitle()},{id:14,title:p.name.jobTitle()},{id:15,title:p.name.jobTitle()}]}];var x=function(e){return e.SortList="[Kanban] SortList",e.SortCard="[Kanban] SortCard",e.AddCard="[Kanban] AddCard",e.RemoveCard="[Kanban] RemoveCard",e.Spill="[Kanban] Spill",e}(x||{}),q=class{constructor(r,n){this.listId=r,this.title=n,this.type=x.AddCard}},J=class{constructor(r){this.item=r,this.type=x.RemoveCard}},Q=class{constructor(r){this.item=r,this.type=x.Spill}},et={board:Ae,draggingBoard:null,cardInFlight:null,listInFlight:null,nextId:1e3,spilledCard:!1,isCopying:!1,shouldCopy:!1},L=e=>l(s({},e),{draggingBoard:null,cardInFlight:null,listInFlight:null,isCopying:!1,spilledCard:!1}),ie=Symbol("CLONED_CARD"),je=(e,r)=>l(s({},e),{id:r}),Ne=(e,r)=>{let{board:n,nextId:t}=e;if(e.cardInFlight){let{data:i,hover:o}=e.cardInFlight;if(e.isCopying)t++,n=e.spilledCard?e.board:Y(e.board,r,o.listId,o.index);else{let f=e.draggingBoard||e.board;n=e.spilledCard?f:Y(f,i,o.listId,o.index)}}return l(s({},L(e)),{board:n,nextId:t})};function tt(e,r){let n=e.draggingBoard||e.board,{data:t,index:i,listId:o,hover:f}=r.item;switch(r.event){case y.BeginDrag:return l(s({},e),{draggingBoard:Re(e.board,i),listInFlight:r.item});case y.Hover:return l(s({},e),{listInFlight:r.item});case y.Drop:return l(s({},L(e)),{board:ne(n,t,f.index)});case y.EndDrag:return L(e);default:return e}}function nt(e,r){let{data:n,index:t,listId:i,hover:o}=r.item;switch(e=l(s({},e),{spilledCard:!1}),r.event){case y.BeginDrag:return l(s({},e),{draggingBoard:re(e.board,i,t),cardInFlight:r.item,isCopying:e.shouldCopy&&i===1});case y.Hover:return l(s({},e),{cardInFlight:r.item});case y.Drop:return Ne(e,je(e.cardInFlight.data,e.nextId));case y.EndDrag:return L(e);default:return e}}function $e(e=et,r){let n=e.draggingBoard||e.board;switch(r.type){case x.SortList:return tt(e,r);case x.SortCard:return nt(e,r);case x.AddCard:{let t={id:e.nextId,title:r.title},o=n.find(f=>f.id===r.listId).cards.length;return l(s({},L(e)),{board:Y(e.board,t,r.listId,o),nextId:e.nextId+1})}case x.RemoveCard:{let{listId:t,index:i}=r.item;return l(s({},L(e)),{board:re(e.board,t,i)})}case x.Spill:return l(s({},e),{spilledCard:!0,cardInFlight:r.item});default:return e}}var U=be("kanban"),oe=D(U,e=>e.isCopying),rt=D(U,e=>e.cardInFlight),it=D(oe,rt,(e,r)=>e&&r?je(r.data,ie):null),ot=D(U,e=>e.board),He=e=>D(ot,r=>{let n=r.find(t=>t.id===e);return n&&n.cards}),ze=D(U,it,(e,r)=>{let{cardInFlight:n,listInFlight:t}=e,i=e.draggingBoard||e.board;if(n!=null)return Ne(e,r).board;if(t!=null){let{hover:o,data:f}=t;return ne(i,f,o.index)}return i});var I=(()=>{class e{constructor(n){this.store=n,this.boardSpec=new te(this.store,x.SortList,{type:_.LIST,trackBy:t=>t.id,getList:t=>this.store.pipe(V(ze))}),this.isCopying=!1,this.subs=this.store.pipe(V(oe)).subscribe(t=>this.isCopying=t),this.listSpec=new te(this.store,x.SortCard,{type:_.CARD,trackBy:t=>t.id,getList:t=>this.store.pipe(V(He(t)),de(i=>i!=null)),isDragging:(t,i)=>{let o=this.isCopying?ie:i.data.id;return t.id===o}})}ngOnDestroy(){this.subs.unsubscribe()}static{this.\u0275fac=function(t){return new(t||e)(le(F))}}static{this.\u0275prov=se({token:e,factory:e.\u0275fac})}}return e})();var We=(()=>{class e{constructor(n){this.specs=n,this.ItemTypes=_,this.card={id:1337,title:"External card - drag me in!"},this.nextId=3e6,this.externalSpec=l(s({},this.specs.listSpec),{beginDrag:()=>{},createData:()=>({id:this.nextId++,title:this.card.title})})}static{this.\u0275fac=function(t){return new(t||e)(C(I))}}static{this.\u0275cmp=g({type:e,selectors:[["kanban-external"]],standalone:!0,features:[b],decls:3,vars:4,consts:[["ext","dndSortableExternal"],[1,"ext"],[3,"dndSortableExternal","card","dragSource","noHTML5Preview"]],template:function(t,i){if(t&1&&(a(0,"div",1),u(1,"kanban-card",2,0),d()),t&2){let o=A(2);h(),c("dndSortableExternal",i.externalSpec)("card",i.card)("dragSource",o.source)("noHTML5Preview",!0)}},dependencies:[K,B,Fe,P,z],styles:[".ext[_ngcontent-%COMP%]{margin-right:8px;margin-bottom:8px;display:inline-block}"]})}}return e})();var Ye=(()=>{class e{constructor(){this.add=new M,this.addForm=new Ie({title:new ke})}onSubmit(){this.add.emit(this.addForm.get("title")?.value),this.addForm.reset()}static{this.\u0275fac=function(t){return new(t||e)}}static{this.\u0275cmp=g({type:e,selectors:[["kanban-add-card"]],outputs:{add:"add"},standalone:!0,features:[b],decls:2,vars:1,consts:[[3,"formGroup"],["placeholder","Add a card","formControlName","title",1,"title",3,"keyup.enter"]],template:function(t,i){t&1&&(a(0,"form",0)(1,"input",1),k("keyup.enter",function(){return i.onSubmit()}),d()()),t&2&&c("formGroup",i.addForm)},dependencies:[Te,De,_e,ye,Se,we,Me],styles:[".title[_ngcontent-%COMP%]{box-sizing:border-box;border:none;width:100%;background:#0000;padding:6px 8px}.title[_ngcontent-%COMP%]:focus{background:#fff}"]})}}return e})();function dt(e,r){if(e&1&&(u(0,"kanban-card",7,1),j(2,"async")),e&2){let n=r.$implicit,t=r.$index,i=A(1);v();let o=A(1);c("card",n)("dndSortableRender",o.contextFor(n,t))("dragSource",i.source)("noHTML5Preview",!0)("placeholder",!!N(2,5,i.isDragging$))}}function st(e,r){if(e&1&&(a(0,"div",4,0),Z(2,dt,3,7,"kanban-card",7,X().trackById,!0),d()),e&2){let n=v();c("spec",n.specs.listSpec)("listId",n.list.id),h(2),ee(n.list.cards)}}function lt(e,r){if(e&1&&u(0,"kanban-card",8),e&2){let n=r.$implicit;c("card",n)}}function pt(e,r){if(e&1&&(a(0,"div",5),Z(1,lt,1,1,"kanban-card",8,X().trackById,!0),d()),e&2){let n=v();h(),ee(n.list.cards)}}var qe=(()=>{class e{constructor(n,t){this.specs=n,this.render=t,this.preview=!1,this.addCard=new M,this.placeholder$=this.render&&this.render.source.listen(i=>i.isDragging()),this.isOver$=this.render&&this.render.target.listen(i=>i.canDrop()&&i.isOver()),this.trackById=(i,o)=>o.id}ngOnInit(){}static{this.\u0275fac=function(t){return new(t||e)(C(I),C(E,8))}}static{this.\u0275cmp=g({type:e,selectors:[["kanban-list"]],inputs:{list:"list",preview:"preview"},outputs:{addCard:"addCard"},standalone:!0,features:[b],decls:8,vars:10,consts:[["clist","dndSortable"],["render","dndSortableRender"],[1,"list"],[1,"handle",3,"dragSource","noHTML5Preview"],["dndSortable","",1,"cards-container",3,"spec","listId"],[1,"cards-container"],[3,"add"],[3,"card","dndSortableRender","dragSource","noHTML5Preview","placeholder"],[3,"card"]],template:function(t,i){t&1&&(a(0,"div",2),j(1,"async"),a(2,"div",3)(3,"h3"),m(4),d()(),S(5,st,4,2,"div",4)(6,pt,3,0,"div",5),a(7,"kanban-add-card",6),k("add",function(f){return i.addCard.emit(f)}),d()()),t&2&&(T("list--preview",i.preview)("list--placeholder",N(1,8,i.render==null?null:i.render.isDragging$)),h(2),c("dragSource",i.render==null?null:i.render.source)("noHTML5Preview",!0),h(2),$(i.list.title),h(),O(i.render?5:6))},dependencies:[P,z,B,Pe,E,K,Ye,H],styles:['.cards-container[_ngcontent-%COMP%]{min-height:20px}.cards-container[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin-bottom:6px}.list[_ngcontent-%COMP%]{position:relative;width:240px;padding:8px;border-radius:4px;-webkit-user-select:none;user-select:none;background:#eee;box-shadow:0 1px 3px #00000014,0 1px 2px #00000029}.list--preview[_ngcontent-%COMP%]{box-shadow:0 14px 28px #0003,0 10px 10px #0000001a}.list--placeholder[_ngcontent-%COMP%]{background:none;box-shadow:none}.list--placeholder[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{visibility:hidden}.list--placeholder[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;width:100%;height:100%;background:#00000021;border-radius:4px;box-shadow:inset 0 3px 7px #00000021,inset 0 1px 3px #00000038}.handle[_ngcontent-%COMP%]{margin:-8px;padding:8px}.handle[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 8px}'],changeDetection:0})}}return e})();function mt(e,r){if(e&1&&(a(0,"div",1)(1,"div"),u(2,"i",2),a(3,"span"),m(4,"Drop here to delete"),d()(),u(5,"div",3),d()),e&2){let n=r,t=v();T("isOver",n.isOver),c("dropTarget",t.target),h(5),R(t.getStyle(n.isOver,n.item))}}var Je=(()=>{class e{constructor(n){this.dnd=n,this.dropped=new M,this.target=this.dnd.dropTarget(_.CARD,{canDrop:t=>t.getItem().isInternal,drop:t=>{this.dropped.emit(t.getItem())}}),this.collect$=this.target.listen(t=>({item:t.getItem(),isOver:t.isOver()&&t.canDrop()}))}getStyle(n,t){return!n||!t?{}:l(s({},t.size.style()),{transition:"all 50ms ease-in"})}static{this.\u0275fac=function(t){return new(t||e)(C(G))}}static{this.\u0275cmp=g({type:e,selectors:[["kanban-trash-can"]],outputs:{dropped:"dropped"},standalone:!0,features:[b],decls:2,vars:3,consts:[[1,"trash-can",3,"isOver","dropTarget"],[1,"trash-can",3,"dropTarget"],[1,"fas","fa-trash-alt"],[1,"space"]],template:function(t,i){if(t&1&&(S(0,mt,6,5,"div",0),j(1,"async")),t&2){let o;O((o=N(1,1,i.collect$))?0:-1,o)}},dependencies:[P,ge,H],styles:[".fas[_ngcontent-%COMP%]{margin-right:8px}.trash-can[_ngcontent-%COMP%]{margin:8px;padding:8px;font-weight:700;text-shadow:1px 1px rgba(255,255,255,.2);border-radius:4px;border:1px dashed #333;text-align:center;transform-origin:100% 100%;transition:transform 50ms ease-out}.space[_ngcontent-%COMP%]{height:0;width:0;transition:all 50ms ease-out}.isOver[_ngcontent-%COMP%]{transition:transform 50ms ease-in;background:#fff6;transform:scale(1.2)}"],changeDetection:0})}}return e})();function ut(e,r){if(e&1&&u(0,"kanban-card",7),e&2){let n=v().item;R(n.size.style()),c("card",n.data)("preview",!0)}}function ft(e,r){if(e&1&&u(0,"kanban-list",8),e&2){let n=v().item;R(n.size.style()),c("list",n.data)("preview",!0)}}function gt(e,r){if(e&1&&S(0,ut,1,4,"kanban-card",5)(1,ft,1,4,"kanban-list",6),e&2){let n,t=r.$implicit,i=v();O((n=t)===i.ItemTypes.CARD?0:n===i.ItemTypes.LIST?1:-1)}}function ht(e,r){if(e&1){let n=fe();a(0,"kanban-list",9),k("addCard",function(i){let o=ce(n).$implicit,f=v();return me(f.addCard(o.data.id,i))}),d()}if(e&2){let n=r.$implicit;c("dndSortableRender",n)("list",n.data)}}var Qe=(()=>{class e{constructor(n,t){this.store=n,this.specs=t,this.ItemTypes=_,this.hoverTrigger=Oe.fixed}addCard(n,t){this.store.dispatch(new q(n,t))}removeCard(n){this.store.dispatch(new J(n))}static{this.\u0275fac=function(t){return new(t||e)(C(F),C(I))}}static{this.\u0275cmp=g({type:e,selectors:[["kanban-board"]],standalone:!0,features:[b],decls:7,vars:5,consts:[[3,"allBackends"],[1,"kanban-root",3,"hoverTrigger","listId","spec","horizontal"],["dndSortableTemplate",""],[1,"trash-zone"],[3,"dropped"],[3,"card","preview","style"],[3,"list","preview","style"],[3,"card","preview"],[3,"list","preview"],[3,"addCard","dndSortableRender","list"]],template:function(t,i){t&1&&(a(0,"dnd-preview",0),S(1,gt,2,1,"ng-template"),d(),a(2,"dnd-sortable-list",1),S(3,ht,1,2,"ng-template",2),d(),a(4,"div",3)(5,"kanban-trash-can",4),k("dropped",function(f){return i.removeCard(f)}),d(),u(6,"kanban-external"),d()),t&2&&(c("allBackends",!0),h(2),c("hoverTrigger",i.hoverTrigger)("listId",888)("spec",i.specs.boardSpec)("horizontal",!0))},dependencies:[Ce,he,B,Be,Ee,E,K,qe,We,Je],styles:[".kanban-root[_ngcontent-%COMP%]{background:#828cca;flex:1;display:flex;min-height:500px;overflow-x:scroll;padding:8px;justify-content:flex-start}.kanban-root[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin-right:8px}.trash-zone[_ngcontent-%COMP%]{position:absolute;right:0;bottom:0;text-align:right}"],changeDetection:0})}}return e})();var Ue=(()=>{class e{constructor(n,t,i){this.dnd=n,this.el=t,this.store=i,this.cardSpill=Ke(this.dnd,_.CARD,{hover:o=>this.store.dispatch(new Q(o))})}ngAfterViewInit(){this.cardSpill.connectDropTarget(this.el.nativeElement)}ngOnDestroy(){this.cardSpill.unsubscribe()}static{this.\u0275fac=function(t){return new(t||e)(C(G),C(ue),C(F))}}static{this.\u0275cmp=g({type:e,selectors:[["kanban-container"]],standalone:!0,features:[b],decls:20,vars:0,consts:[[1,"text"],["path","sortable/kanban"],[1,"span","span--darkblue"],[1,"span","span--light"],[1,"relative"]],template:function(t,i){t&1&&(a(0,"div",0),u(1,"app-example-link",1),a(2,"p"),m(3," This example uses "),a(4,"code"),m(5,"@ng-dnd/sortable"),d(),m(6,". There are two kinds of sortable in play here: "),d(),a(7,"ul")(8,"li"),m(9,"One "),a(10,"span",2),m(11,"horizontal"),d(),m(12," one, whose 'cards' are the vertical lists. Try grabbing a whole list by its header, and reordering. "),d(),a(13,"li"),m(14,"Many "),a(15,"span",3),m(16,"vertical"),d(),m(17," ones, which contain the kanban cards. Try moving the cards between lists. "),d()()(),a(18,"div",4),u(19,"kanban-board"),d())},dependencies:[ve,Qe],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column}.relative[_ngcontent-%COMP%]{position:relative}.text[_ngcontent-%COMP%]{background:#fff;max-width:800px}.span[_ngcontent-%COMP%]{border-radius:4px;padding:0 2px}.span--darkblue[_ngcontent-%COMP%]{background:#828cca;color:#fff}.span--light[_ngcontent-%COMP%]{background:#eee;color:#000;box-shadow:0 1px 3px #00000014,0 1px 2px #00000029}"]})}}return e})();var Rn=[{path:"",component:Ue,providers:[pe([xe.forFeature("kanban",$e)]),I]}];export{Rn as routes};
